<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Confirmed — beauty</title>
    <meta name="description" content="Your order has been confirmed. Thank you for shopping with beauty.">
    <style>
    /* ============================================
       SHARED TOKENS
       ============================================ */
    :root {
        --bg-primary:#FAF7F2; --bg-alt:#FFFDF9;
        --surface:rgba(255,255,255,0.85); --surface-glass:rgba(255,255,255,0.65);
        --border-subtle:rgba(15,15,20,0.10);
        --text-primary:rgba(15,15,20,0.92); --text-secondary:rgba(15,15,20,0.62);
        --accent-ink:#111114; --accent-soft:#D9C7B8;
        --pastel-peach:#F3D7C7; --pastel-lavender:#D7D2F6;
        --pastel-sage:#D7E9E1; --highlight:#F0E7FF;
        --font-serif:'Iowan Old Style','Palatino Linotype','URW Palladio L',P052,serif;
        --font-sans:-apple-system,BlinkMacSystemFont,'Segoe UI',Helvetica,Arial,sans-serif;
        --ease-smooth:cubic-bezier(0.2,0.8,0.2,1);
        --color-success:#3A7D5C; --color-success-bg:#EEF7F2;
    }

    /* ============================================
       RESET & BASE
       ============================================ */
    *,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
    html{scroll-behavior:smooth}
    body{
        font-family:var(--font-sans);
        background:var(--bg-primary);
        color:var(--text-primary);
        line-height:1.6;
        min-height:100vh;
        display:flex;
        flex-direction:column;
    }
    /* grain */
    body::before{
        content:'';position:fixed;inset:0;
        background-image:url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.03'/%3E%3C/svg%3E");
        pointer-events:none;z-index:9999;opacity:.5;
    }
    button{font-family:inherit;cursor:pointer;border:none;background:none}
    a{color:inherit;text-decoration:none}
    *:focus-visible{outline:2px solid var(--accent-ink);outline-offset:3px}

    /* ============================================
       HEADER
       ============================================ */
    .page-header{
        background:var(--surface-glass);
        backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);
        border-bottom:1px solid var(--border-subtle);
        padding:1.25rem clamp(1rem,5vw,3rem);
        text-align:center;
    }
    .page-header__logo{
        font-family:var(--font-serif);
        font-size:clamp(1.4rem,3.5vw,2rem);
        font-weight:400;letter-spacing:.02em;
    }

    /* ============================================
       HERO CHECKMARK BAND
       ============================================ */
    .confirm-hero{
        background:linear-gradient(135deg, var(--pastel-sage) 0%, var(--highlight) 50%, var(--pastel-peach) 100%);
        padding:4rem clamp(1rem,5vw,2rem) 3rem;
        text-align:center;
        position:relative;overflow:hidden;
    }
    /* soft decorative circles */
    .confirm-hero::before,
    .confirm-hero::after{
        content:'';position:absolute;border-radius:50%;
        background:rgba(255,255,255,.18);
        pointer-events:none;
    }
    .confirm-hero::before{width:260px;height:260px;top:-80px;right:-60px}
    .confirm-hero::after {width:180px;height:180px;bottom:-50px;left:-40px}

    .checkmark-ring{
        width:96px;height:96px;border-radius:50%;
        background:#fff;
        box-shadow:0 8px 32px rgba(15,15,20,.12);
        display:flex;align-items:center;justify-content:center;
        margin:0 auto 1.75rem;
        position:relative;z-index:1;
        animation:popIn .5s var(--ease-smooth) both;
    }
    @keyframes popIn{
        0%{transform:scale(.6);opacity:0}
        70%{transform:scale(1.08)}
        100%{transform:scale(1);opacity:1}
    }
    .checkmark-ring svg{width:44px;height:44px}

    .confirm-hero h1{
        font-family:var(--font-serif);
        font-size:clamp(2rem,5vw,3rem);
        font-weight:400;margin-bottom:.4rem;
        position:relative;z-index:1;
    }
    .confirm-hero p{
        color:var(--text-secondary);font-size:1rem;
        position:relative;z-index:1;
    }

    /* ============================================
       ORDER ID BADGE
       ============================================ */
    .order-id-badge{
        display:inline-flex;align-items:center;gap:.6rem;
        background:#fff;border:1px solid var(--border-subtle);
        border-radius:24px;padding:.5rem 1.25rem;
        margin:1.5rem auto 0;position:relative;z-index:1;
        font-size:.82rem;letter-spacing:.06em;
    }
    .order-id-badge span{color:var(--text-secondary);text-transform:uppercase}
    .order-id-badge strong{color:var(--text-primary);font-size:.9rem}
    .copy-btn{
        padding:.25rem .55rem;background:var(--bg-primary);
        border-radius:6px;font-size:.7rem;color:var(--text-secondary);
        text-transform:uppercase;letter-spacing:.06em;
        border:1px solid var(--border-subtle);
        transition:background .15s,color .15s;
    }
    .copy-btn:hover{background:var(--accent-ink);color:#fff}

    /* ============================================
       MAIN CONTENT GRID
       ============================================ */
    .confirm-layout{
        flex:1;
        display:grid;
        grid-template-columns:1fr 380px;
        gap:2.5rem;
        max-width:1000px;
        margin:0 auto;
        padding:2.5rem clamp(1rem,5vw,3rem) 5rem;
        width:100%;
    }

    /* ============================================
       CARD SHELL (shared)
       ============================================ */
    .card{
        background:#fff;border:1px solid var(--border-subtle);
        border-radius:14px;padding:1.75rem;
    }
    .card__title{
        font-family:var(--font-serif);
        font-size:1.2rem;font-weight:400;
        margin-bottom:1.25rem;padding-bottom:.85rem;
        border-bottom:1px solid var(--border-subtle);
    }

    /* ============================================
       ITEMS RECEIVED
       ============================================ */
    .order-item{
        display:grid;grid-template-columns:64px 1fr auto;
        gap:1rem;align-items:center;
        padding:.9rem 0;border-bottom:1px solid var(--border-subtle);
    }
    .order-item:last-child{border-bottom:none}
    .order-item__thumb{
        width:64px;height:64px;border-radius:10px;
        background:var(--bg-alt);overflow:hidden;
    }
    .order-item__thumb img{width:100%;height:100%;object-fit:contain}
    .order-item__name{font-weight:600;font-size:.9rem;margin-bottom:.15rem}
    .order-item__qty{font-size:.78rem;color:var(--text-secondary)}
    .order-item__price{font-weight:700;font-size:.95rem}

    /* ============================================
       TOTALS BLOCK
       ============================================ */
    .totals-row{
        display:flex;justify-content:space-between;
        font-size:.85rem;padding:.4rem 0;
    }
    .totals-row span:first-child{color:var(--text-secondary)}
    .totals-row span:last-child{font-weight:600}
    .totals-row.discount span:last-child{color:var(--color-success)}
    .totals-row.grand{
        font-size:1.1rem;margin-top:.75rem;padding-top:.75rem;
        border-top:1px solid var(--border-subtle);
    }
    .totals-row.grand span:first-child{color:var(--text-primary);font-weight:600}

    /* ============================================
       SHIPPING TIMELINE
       ============================================ */
    .timeline{list-style:none;position:relative;padding-left:1.75rem}
    .timeline::before{
        content:'';position:absolute;left:.7rem;top:0;bottom:0;
        width:2px;background:var(--border-subtle);
    }
    .timeline li{
        position:relative;padding:.6rem 0;font-size:.88rem;
    }
    .timeline li::before{
        content:'';position:absolute;
        left:-1.75rem;top:1.1rem;
        width:14px;height:14px;border-radius:50%;
        background:#fff;border:2.5px solid var(--border-subtle);
        transition:border-color .3s,background .3s;
    }
    .timeline li.done::before{border-color:var(--color-success);background:var(--color-success)}
    .timeline li.active::before{border-color:var(--accent-ink);background:var(--accent-ink)}
    .timeline li .tl-label{font-weight:600;color:var(--text-primary)}
    .timeline li .tl-sub{font-size:.75rem;color:var(--text-secondary)}

    /* ============================================
       CONTACT / HELP
       ============================================ */
    .help-block{margin-top:.5rem}
    .help-row{
        display:flex;align-items:center;gap:.75rem;
        padding:.85rem 0;border-bottom:1px solid var(--border-subtle);
        font-size:.85rem;
    }
    .help-row:last-child{border-bottom:none}
    .help-icon{
        width:36px;height:36px;border-radius:10px;
        background:var(--bg-alt);
        display:flex;align-items:center;justify-content:center;flex-shrink:0;
    }
    .help-row__text .help-label{font-weight:600;margin-bottom:.1rem}
    .help-row__text .help-sub{font-size:.75rem;color:var(--text-secondary)}
    .help-row a{color:var(--accent-ink);font-weight:600;text-decoration:underline;text-decoration-color:transparent;transition:text-decoration-color .2s}
    .help-row a:hover{text-decoration-color:var(--accent-ink)}

    /* ============================================
       CTA ROW AT BOTTOM
       ============================================ */
    .cta-row{
        grid-column:1/-1;
        display:flex;gap:1rem;justify-content:center;flex-wrap:wrap;
        padding-top:1rem;
    }
    .btn-primary{
        padding:.9rem 2.2rem;
        background:var(--accent-ink);color:var(--bg-primary);
        border-radius:6px;font-size:.8rem;
        letter-spacing:.1em;text-transform:uppercase;font-weight:700;
        transition:opacity .2s;
    }
    .btn-primary:hover{opacity:.85}
    .btn-outline{
        padding:.9rem 2.2rem;
        border:1.5px solid var(--accent-ink);color:var(--accent-ink);
        border-radius:6px;font-size:.8rem;
        letter-spacing:.1em;text-transform:uppercase;font-weight:700;
        transition:background .2s,color .2s;
    }
    .btn-outline:hover{background:var(--accent-ink);color:var(--bg-primary)}

    /* ============================================
       FALLBACK (if no order data)
       ============================================ */
    .no-order{
        text-align:center;padding:6rem 1rem;
        max-width:480px;margin:0 auto;
    }
    .no-order h2{font-family:var(--font-serif);font-weight:400;font-size:1.6rem;margin-bottom:.75rem}
    .no-order p{color:var(--text-secondary);margin-bottom:1.5rem}

    /* ============================================
       RESPONSIVE
       ============================================ */
    @media(max-width:860px){
        .confirm-layout{grid-template-columns:1fr;gap:1.5rem}
        .cta-row{grid-column:1}
    }
    @media(max-width:480px){
        .confirm-hero{padding:3rem 1rem 2.5rem}
        .order-item{grid-template-columns:52px 1fr auto;gap:.7rem}
    }
    @media(prefers-reduced-motion:reduce){
        *,*::before,*::after{animation-duration:.01ms!important;transition-duration:.01ms!important}
    }
    </style>
</head>
<body>

<!-- HEADER -->
<header class="page-header">
    <div class="page-header__logo">beauty</div>
</header>

<!-- HERO -->
<section class="confirm-hero">
    <div class="checkmark-ring">
        <svg viewBox="0 0 44 44" fill="none">
            <circle cx="22" cy="22" r="22" fill="var(--color-success)"/>
            <path d="M12 23L19 30L32 14" stroke="white" stroke-width="3.5" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </div>
    <h1>Order Confirmed</h1>
    <p>Thank you for shopping with beauty</p>
    <div class="order-id-badge">
        <span>Order</span>
        <strong id="heroOrderId">—</strong>
        <button class="copy-btn" id="copyBtn" aria-label="Copy order ID">Copy</button>
    </div>
</section>

<!-- MAIN GRID -->
<main class="confirm-layout" id="confirmLayout">

    <!-- LEFT — Items + Totals -->
    <div class="left-col">
        <div class="card" style="margin-bottom:1.5rem">
            <h2 class="card__title">Items Ordered</h2>
            <div id="orderItemsList"><!-- JS --></div>
        </div>
        <div class="card">
            <h2 class="card__title">Order Total</h2>
            <div id="totalsBlock"><!-- JS --></div>
        </div>
    </div>

    <!-- RIGHT — Timeline + Help -->
    <div class="right-col">
        <div class="card" style="margin-bottom:1.5rem">
            <h2 class="card__title">Delivery Status</h2>
            <ul class="timeline" id="deliveryTimeline">
                <li class="done">
                    <span class="tl-label">Order Placed</span>
                    <span class="tl-sub" id="tlPlacedDate">—</span>
                </li>
                <li class="done">
                    <span class="tl-label">Payment Confirmed</span>
                    <span class="tl-sub">Secure payment processed</span>
                </li>
                <li class="active">
                    <span class="tl-label">Processing</span>
                    <span class="tl-sub">Your order is being prepared</span>
                </li>
                <li>
                    <span class="tl-label">Shipped</span>
                    <span class="tl-sub">Tracking details will be sent via email</span>
                </li>
                <li>
                    <span class="tl-label">Delivered</span>
                    <span class="tl-sub" id="tlDeliverDate">Estimated —</span>
                </li>
            </ul>
        </div>

        <div class="card">
            <h2 class="card__title">Need Help?</h2>
            <div class="help-block">
                <div class="help-row">
                    <div class="help-icon">
                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none"><rect x="1" y="3" width="16" height="12" rx="2" stroke="currentColor" stroke-width="1.5"/><path d="M1 5l8 5 8-5" stroke="currentColor" stroke-width="1.5"/></svg>
                    </div>
                    <div class="help-row__text">
                        <div class="help-label">Receipt sent to</div>
                        <div class="help-sub" id="receiptEmail">—</div>
                    </div>
                </div>
                <div class="help-row">
                    <div class="help-icon">
                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none"><circle cx="9" cy="9" r="7.5" stroke="currentColor" stroke-width="1.5"/><path d="M9 5v4l3 2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
                    </div>
                    <div class="help-row__text">
                        <div class="help-label">Returns & Exchanges</div>
                        <div class="help-sub">30-day hassle-free returns</div>
                    </div>
                </div>
                <div class="help-row">
                    <div class="help-icon">
                        <svg width="18" height="18" viewBox="0 0 18 18" fill="none"><path d="M9 1v16M1 9h16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
                    </div>
                    <div class="help-row__text">
                        <div class="help-label">Have a question?</div>
                        <div class="help-sub"><a href="#">Contact Support →</a></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- BOTTOM CTA -->
    <div class="cta-row">
        <a href="index.html" class="btn-primary">Continue Shopping</a>
        <button class="btn-outline" id="printBtn">Print Receipt</button>
    </div>

</main>

<!-- FALLBACK: no order data -->
<div class="no-order" id="noOrderFallback" style="display:none">
    <h2>No Order Found</h2>
    <p>It looks like you arrived here directly. Please check your email for an order confirmation link, or go back to the shop.</p>
    <a href="index.html" class="btn-primary" style="display:inline-block">Back to Shop</a>
</div>

<script>
// ============================================
// Read saved order from localStorage
// (written by shopping-cart.html on completion)
// ============================================
(function(){
    const raw = localStorage.getItem('beautyLastOrder');

    if (!raw) {
        // no order data — show fallback, hide main content
        document.querySelector('.confirm-hero').style.display   = 'none';
        document.getElementById('confirmLayout').style.display = 'none';
        document.getElementById('noOrderFallback').style.display = 'block';
        return;
    }

    const order = JSON.parse(raw);
    // order shape: { id, items:[{id,name,price,quantity}], subtotal, shipping, tax, discount, total, email, shippingMethod, placedAt }

    /* ---- hero ---- */
    document.getElementById('heroOrderId').textContent = order.id;

    /* ---- copy button ---- */
    document.getElementById('copyBtn').addEventListener('click', function(){
        navigator.clipboard.writeText(order.id).then(() => {
            this.textContent = 'Copied!';
            setTimeout(() => { this.textContent = 'Copy'; }, 1400);
        });
    });

    /* ---- items list ---- */
    function makeSVG(id){
        const c=[['%23F3D7C7','%23E8C4B0'],['%23D7D2F6','%23C5BEE8'],['%23D7E9E1','%23C2D9CE'],['%23F0E7FF','%23E0D5F5'],['%23FFE5E0','%23FFD5CE'],['%23E5F2FF','%23D0E7FF']];
        const p=c[id%c.length];
        return `data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cdefs%3E%3ClinearGradient id='g${id}' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:${p[0]}'/%3E%3Cstop offset='100%25' style='stop-color:${p[1]}'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='200' height='200' fill='%23FFFDF9'/%3E%3Ccircle cx='100' cy='100' r='60' fill='url(%23g${id})' opacity='0.8'/%3E%3Ccircle cx='100' cy='80' r='20' fill='rgba(255,255,255,0.9)'/%3E%3C/svg%3E`;
    }

    document.getElementById('orderItemsList').innerHTML = order.items.map(i => `
        <div class="order-item">
            <div class="order-item__thumb"><img src="${makeSVG(i.id)}" alt="${i.name}"></div>
            <div>
                <div class="order-item__name">${i.name}</div>
                <div class="order-item__qty">Qty: ${i.quantity}</div>
            </div>
            <div class="order-item__price">$${(i.price * i.quantity).toFixed(2)}</div>
        </div>
    `).join('');

    /* ---- totals ---- */
    document.getElementById('totalsBlock').innerHTML = `
        <div class="totals-row"><span>Subtotal</span><span>$${order.subtotal.toFixed(2)}</span></div>
        <div class="totals-row"><span>Shipping</span><span>${order.shipping === 0 ? 'FREE' : '$'+order.shipping.toFixed(2)}</span></div>
        <div class="totals-row"><span>Tax</span><span>$${order.tax.toFixed(2)}</span></div>
        ${order.discount > 0 ? `<div class="totals-row discount"><span>Discount</span><span>−$${order.discount.toFixed(2)}</span></div>` : ''}
        <div class="totals-row grand"><span>Total</span><span>$${order.total.toFixed(2)}</span></div>
    `;

    /* ---- timeline dates ---- */
    const placed  = new Date(order.placedAt);
    const days    = order.shippingMethod === 'overnight' ? 1 : order.shippingMethod === 'express' ? 3 : 6;
    const deliver = new Date(placed); deliver.setDate(deliver.getDate() + days);
    const fmt     = { month:'long', day:'numeric', year:'numeric' };

    document.getElementById('tlPlacedDate').textContent  = placed.toLocaleDateString('en-US', fmt);
    document.getElementById('tlDeliverDate').textContent = 'Estimated ' + deliver.toLocaleDateString('en-US', fmt);

    /* ---- receipt email ---- */
    document.getElementById('receiptEmail').textContent = order.email || '—';

    /* ---- print ---- */
    document.getElementById('printBtn').addEventListener('click', () => window.print());
})();
</script>
</body>
</html>
